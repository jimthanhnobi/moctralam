@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

@inject GearShop.Data.ApplicationDbContext _context

@{
	var user = await UserManager.GetUserAsync(User);
	var ApplicationUser = new ApplicationUser();

	if (user != null)
	{
		ApplicationUser = _context.ApplicationUsers.Find(user.Id);
	}
}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Staff page</title>

	<!-- Favicon -->
	<link href="img/favicon.ico" rel="icon">

	<!-- Google Web Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&display=swap" rel="stylesheet">

	<!-- Icon Font Stylesheet -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

	<!-- Libraries Stylesheet -->
	<link href="~/DashBroadTemplate/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
	<link href="~/DashBroadTemplate/lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

	<!-- Customized Bootstrap Stylesheet -->
	<link href="~/DashBroadTemplate/css/bootstrap.min.css" rel="stylesheet">

	<!-- Template Stylesheet -->
	<link href="~/DashBroadTemplate/css/style.css" rel="stylesheet">

</head>

<body>
	<div class="container-fluid position-relative bg-white d-flex p-0">
		<!-- Sidebar Start -->
		<div class="sidebar pe-4 pb-3">
			<nav class="navbar bg-light navbar-light">
				<a asp-action="Index" asp-controller="HomeStaff" class="text-decoration-none">
					<div class="d-flex align-items-center mb-3">
						<span class="h1 text-uppercase text-primary bg-dark px-2 mb-0">Gear</span>
						<span class="h1 text-uppercase text-dark bg-primary px-2 ml-n1 mb-0">Shop</span>
					</div>
				</a>
				<div class="d-flex align-items-center ms-4 mb-4">
					<div class="position-relative">
						<img class="rounded-circle me-lg-2" src="~/img/user.jpg" alt="" style="width: 40px; height: 40px;">
						<div class="bg-success rounded-circle border border-2 border-white position-absolute end-0 bottom-0 p-1"></div>
					</div>
					<div class="ms-3">
						<h6 class="mb-0">@(ApplicationUser != null ? ApplicationUser.FullName : "")</h6>
						<span>Staff</span>
					</div>
				</div>
				<div class="navbar-nav w-100">
					<a asp-action="Index" asp-controller="HomeStaff" class="nav-item nav-link @IsActive("HomeStaff")">
						<i class="fa fa-tachometer-alt me-2"></i>Dashboard
					</a>
					<a asp-action="Index" asp-controller="ProductStaff" class="nav-item nav-link @IsActive("ProductStaff")">
						<i class="fa fa-laptop me-2"></i>Quản lý Sản phẩm
					</a>
					<a asp-action="Index" asp-controller="ProductTypesStaff" class="nav-item nav-link @IsActive("ProductTypesStaff")">
						<i class="fa fa-th me-2"></i>Quản lý Danh mục
					</a>
					<a asp-action="Index" asp-controller="BrandStaff" class="nav-item nav-link @IsActive("BrandStaff")">
						<i class="fa fa-tags me-2"></i>Quản lý Thương hiệu
					</a>
					<a asp-action="Index" asp-controller="OrderStaff" class="nav-item nav-link @IsActive("OrderStaff")">
						<i class="fa fa-shopping-cart me-2"></i>Quản lý Đơn hàng
					</a>
					<a asp-action="Index" asp-controller="StaffManageAccount" class="nav-item nav-link @IsActive("StaffManageAccount")">
						<i class="fa fa-user me-2"></i>Quản lý Người dùng
					</a>
					<a href="#" class="nav-item nav-link"><i class="fa fa-chart-bar me-2"></i>Thống kê, báo cáo</a>
				</div>
			</nav>
		</div>
		<!-- Sidebar End -->
		<!-- Content Start -->
		<div class="content">
			<!-- Navbar Start -->
			<nav class="navbar navbar-expand bg-light navbar-light sticky-top px-4 py-0">
				<a href="index.html" class="navbar-brand d-flex d-lg-none me-4">
					<h2 class="text-primary mb-0"><i class="fa fa-hashtag"></i></h2>
				</a>
				<form class="d-none d-md-flex ms-4 w-50">
					<input class="form-control border-0" type="search" placeholder="Search...">
				</form>
				<div class="navbar-nav align-items-center ms-auto">
					<div class="nav-item dropdown">
						<a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
							<i class="fa fa-envelope me-lg-2"></i>
							<span class="d-none d-lg-inline-flex">Message</span>
						</a>
						<div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">
							<a href="#" class="dropdown-item">
								<div class="d-flex align-items-center">
									<img class="rounded-circle" src="~/img/user.jpg" alt="" style="width: 40px; height: 40px;">
									<div class="ms-2">
										<h6 class="fw-normal mb-0">Jhon send you a message</h6>
										<small>15 minutes ago</small>
									</div>
								</div>
							</a>
							<hr class="dropdown-divider">
							<a href="#" class="dropdown-item">
								<div class="d-flex align-items-center">
									<img class="rounded-circle" src="~/img/user.jpg" alt="" style="width: 40px; height: 40px;">
									<div class="ms-2">
										<h6 class="fw-normal mb-0">Jhon send you a message</h6>
										<small>15 minutes ago</small>
									</div>
								</div>
							</a>
							<hr class="dropdown-divider">
							<a href="#" class="dropdown-item">
								<div class="d-flex align-items-center">
									<img class="rounded-circle" src="~/img/user.jpg" alt="" style="width: 40px; height: 40px;">
									<div class="ms-2">
										<h6 class="fw-normal mb-0">Jhon send you a message</h6>
										<small>15 minutes ago</small>
									</div>
								</div>
							</a>
							<hr class="dropdown-divider">
							<a href="#" class="dropdown-item text-center">See all message</a>
						</div>
					</div>
					<div class="nav-item dropdown">
						<a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
							<i class="fa fa-bell me-lg-2"></i>
							<span class="d-none d-lg-inline-flex">Notification</span>
						</a>
						<div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">
							<a href="#" class="dropdown-item">
								<h6 class="fw-normal mb-0">Profile updated</h6>
								<small>15 minutes ago</small>
							</a>
							<hr class="dropdown-divider">
							<a href="#" class="dropdown-item">
								<h6 class="fw-normal mb-0">New user added</h6>
								<small>15 minutes ago</small>
							</a>
							<hr class="dropdown-divider">
							<a href="#" class="dropdown-item">
								<h6 class="fw-normal mb-0">Password changed</h6>
								<small>15 minutes ago</small>
							</a>
							<hr class="dropdown-divider">
							<a href="#" class="dropdown-item text-center">See all notifications</a>
						</div>
					</div>
					<div class="nav-item dropdown">
						<a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
							<img class="rounded-circle me-lg-2" src="~/img/user.jpg" alt="" style="width: 40px; height: 40px;">
							<span class="d-none d-lg-inline-flex">@(ApplicationUser != null ? ApplicationUser.FullName : "")</span>
						</a>
						<div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">
							<a asp-area="Identity" asp-page="/Account/Manage/Index" class="dropdown-item">My Profile</a>
							<form id="logoutForm" class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
								<button id="logout" type="submit" class="dropdown-item">Logout</button>
							</form>
						</div>
					</div>
				</div>
			</nav>
			<!-- Navbar End -->

			<div class="container-fluid">
				<main role="main" class="pb-3">
					@RenderBody()
				</main>
			</div>

			<!-- Footer Start -->
			<div class="container-fluid pt-4 px-4">
				<div class="bg-light rounded-top p-4">
					<div class="row">
						<div class="col-12 col-sm-6 text-center text-sm-start">
							&copy; <a href="#">GearShop</a>, All Right Reserved.
						</div>
						<div class="col-12 col-sm-6 text-center text-sm-end">
							<!--/*** This template is free as long as you keep the footer author’s credit link/attribution link/backlink. If you'd like to use the template without the footer author’s credit link/attribution link/backlink, you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". Thank you for your support. ***/-->
							Designed By <a href="https://htmlcodex.com">PRN222</a>
						</div>
					</div>
				</div>
			</div>
			<!-- Footer End -->
		</div>
		<!-- Content End -->
		<!-- Back to Top -->
		<a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
	</div>

	<!-- JavaScript Libraries -->
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
	<script src="~/DashBroadTemplate/lib/chart/chart.min.js"></script>
	<script src="~/DashBroadTemplate/lib/easing/easing.min.js"></script>
	<script src="~/DashBroadTemplate/lib/waypoints/waypoints.min.js"></script>
	<script src="~/DashBroadTemplate/lib/owlcarousel/owl.carousel.min.js"></script>
	<script src="~/DashBroadTemplate/lib/tempusdominus/js/moment.min.js"></script>
	<script src="~/DashBroadTemplate/lib/tempusdominus/js/moment-timezone.min.js"></script>
	<script src="~/DashBroadTemplate/lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

	<!-- Template Javascript -->
	<script src="~/js/main.js"></script>

	@await RenderSectionAsync("Scripts", required: false)

	@functions {
		public string IsActive(string controller)
		{
			var currentController = ViewContext.RouteData.Values["Controller"]?.ToString();
			return currentController == controller ? "active" : "";
		}
	}
</body>
</html>